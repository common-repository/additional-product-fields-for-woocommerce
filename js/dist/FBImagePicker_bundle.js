var RedNaoFBImagePicker=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1498)}({0:function(e,t){e.exports=React},100:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBMultipleOptionsBase.Model")},117:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBMultipleOptionsBase.Options")},1498:function(e,t,n){"use strict";n.r(t),n.d(t,"FBImagePicker",(function(){return j}));var o=n(0),i=n(6),r=n(100);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"Execute",value:function(e,t){var n,o;if(null!=e){var i=function(t){var n,i,a;console.log("mve"),null!=r&&(r.style.display="block"),o.style.display="block",t.preventDefault(),n=function(t){var n,o=0,i=0;return t=t||window.event,n=e.getBoundingClientRect(),o=t.pageX-n.left,i=t.pageY-n.top,o-=window.pageXOffset,i-=window.pageYOffset,{x:o,y:i}}(t),i=n.x-o.offsetWidth/2,a=n.y-o.offsetHeight/2,i>e.getBoundingClientRect().width-o.offsetWidth&&(i=e.getBoundingClientRect().width-o.offsetWidth),i<0&&(i=0),a>e.getBoundingClientRect().height-o.offsetHeight&&(a=e.getBoundingClientRect().height-o.offsetHeight),a<0&&(a=0),o.style.left=i+"px",o.style.top=a+"px",r.style.backgroundPosition="-"+i*l+"px -"+a*u+"px"},r=this.GetResultContainer(e,n);n=r,null==o&&((o=document.createElement("DIV")).style.pointerEvents="none",o.style.width="40px",o.style.height="40px",o.style.position="absolute",o.style.border="1px solid #d4d4d4"),e.parentElement.insertBefore(o,e);var l=r.offsetWidth/o.offsetWidth,u=r.offsetHeight/o.offsetHeight;r.style.backgroundImage="url('"+t+"')",r.style.backgroundSize=e.getBoundingClientRect().width*l+"px "+e.getBoundingClientRect().height*u+"px";var a=function(){console.log("enter");var t=e.getBoundingClientRect();n.style.top=t.top+t.height+document.documentElement.scrollTop+"px",n.style.left=t.left+"px"};o.addEventListener("mouseenter",a),o.addEventListener("mousemove",i);var s=function(){null!=r&&(r.style.display="none"),o.style.display="none"};o.addEventListener("mouseleave",s),o.style.display="none",r.style.display="none",e.addEventListener("mouseenter",a),e.addEventListener("mousemove",i),e.addEventListener("mouseleave",s),o.addEventListener("touchmove",i),e.addEventListener("touchmove",i)}}},{key:"GetResultContainer",value:function(e,t){return null==t&&((t=document.createElement("div")).style.width="200px",t.style.height="200px",t.style.position="absolute",t.style.zIndex="100000",document.body.appendChild(t)),t.style.display="block",t}}])&&l(t.prototype,n),o&&l(t,o),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=c(this,f(t).call(this,e,n))).ZoomManager=void 0,o.MaximumNumberOfItems=void 0,o.Options.AllowZoom&&!n.IsDesign&&o.LoadZoomManager(),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(o=[{key:"SetMaximumNumberOfItems",value:function(e){for(;e>0&&e<this.SelectedValues.length&&this.SelectedValues.length>0;)this.SelectedValues.pop();this.MaximumNumberOfItems=e,this.Refresh()}},{key:"InitializeStartingValues",value:function(){p(f(t.prototype),"InitializeStartingValues",this).call(this),this.MaximumNumberOfItems=this.Options.MaximumNumberOfItems}},{key:"GetDynamicFieldNames",value:function(){return["FBImagePicker"]}},{key:"LoadZoomManager",value:function(){this.ZoomManager=new u}},{key:"IsOptionDisabled",value:function(e){var n=p(f(t.prototype),"IsOptionDisabled",this).call(this,e);return n||!!(this.Options.AllowMultipleSelection&&this.MaximumNumberOfItems>0&&this.SelectedValues.length>=this.MaximumNumberOfItems&&this.SelectedValues.indexOf(e)<0)}},{key:"AllowMultiple",get:function(){return this.Options.AllowMultipleSelection}}])&&s(n.prototype,o),i&&s(n,i),t}(r.FBMultipleOptionsBaseModel),y=n(29),h=n(3),g=n(27),b=n(28),v=n(66);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){var e,n;M(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=P(this,(e=E(t)).call.apply(e,[this].concat(i)))).Placeholder=void 0,n.ImageWidth=void 0,n.ImageHeight=void 0,n.AllowMultipleSelection=void 0,n.AllowZoom=void 0,n.Orientation=void 0,n.Columns=void 0,n.MaximumNumberOfItems=void 0,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(o=[{key:"LoadDefaultValues",value:function(){w(E(t.prototype),"LoadDefaultValues",this).call(this),this.ImageWidth="100%",this.ImageHeight="",this.Options=[],this.Type=h.FieldTypeEnum.ImagePicker,this.Label="Image Picker",this.Placeholder="",this.PriceType=i.PriceTypeEnum.options,this.AllowMultipleSelection=!1,this.AllowZoom=!1,this.Orientation="",this.Columns=3,this.MaximumNumberOfItems=0,this.Options=[(new v.OptionItem).Merge({Id:1,PriceType:i.PriceTypeEnum.fixed_amount,SalePrice:"",RegularPrice:"",Label:"Option 1",URL:""}),(new v.OptionItem).Merge({Id:2,PriceType:i.PriceTypeEnum.fixed_amount,SalePrice:"",RegularPrice:"",Label:"Option 2",URL:""}),(new v.OptionItem).Merge({Id:3,PriceType:i.PriceTypeEnum.fixed_amount,SalePrice:"",RegularPrice:"",Label:"Option 3",URL:""})]}}])&&I(n.prototype,o),r&&I(n,r),t}(n(117).FBMultipleOptionsBaseOptions),F=n(2);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=k(t).call(this,e))||"object"!==B(i)&&"function"!=typeof i?T(o):i).InitializeZoom=n.InitializeZoom.bind(T(n)),n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"componentWillReceiveProps",value:function(e,t){if(this.Model.Parent.IsDesign){var n=this.props.Model.Options.Options.filter((function(e){return e.Selected}));this.Model.SelectedValues=n.length>0?n.map((function(e){return e.Id})):[],this.Model.SetQuantity(this.Model.Options.QuantityDefaultValue),this.Model.Refresh()}}},{key:"SubRender",value:function(){return this.Model.Options.ShowQuantitySelector&&this.Model.Options.PriceType!=i.PriceTypeEnum.quantity?"bottom"==this.Model.Options.QuantityPosition||"right"==this.Model.Options.QuantityPosition?o.createElement(o.Fragment,null,this.GetInput(this.Model.Options.QuantityPosition),this.GetQuantityInput(),this.GetPriceOrRequiredBox()):o.createElement(o.Fragment,null,this.GetQuantityInput(),this.GetInput(this.Model.Options.QuantityPosition),this.GetPriceOrRequiredBox()):o.createElement(o.Fragment,null,this.GetInput(""),this.GetPriceOrRequiredBox())}},{key:"GetQuantityInput",value:function(){var e=this;return o.createElement("div",{className:"rnTextFieldQuantity "+this.Model.Options.QuantityPosition},o.createElement("div",{className:"rednaoLabel"},o.createElement("label",{style:{fontWeight:"bold"}},this.Model.Options.QuantityLabel)),o.createElement("input",{className:"rnInputQuantity",placeholder:this.Model.Options.QuantityPlaceholder,style:{width:"100%"},type:"number",value:this.Model.Quantity,onChange:function(t){e.Model.SetQuantity(e.Model.ParseNumber(t.target.value)),e.Model.FireValueChanged()}}))}},{key:"GetInput",value:function(e){var t=this;return o.createElement("div",{className:"rnTextFieldInput "+e},this.GetLabel(),o.createElement("div",{className:"rnImagePickerContainer "+("Vertical"==this.props.Model.Options.Orientation?"rnVertical":"")},"Vertical"==this.props.Model.Options.Orientation?this.GenerateTableLayout():this.Model.Options.Options.map((function(e){return t.GenerateImageItem(e)}))))}},{key:"GenerateImageItem",value:function(e){var t=this,n=this.props.Model.Options.ImageWidth,i=this.props.Model.Options.ImageHeight;null!=n&&(""==n.trim()?n=void 0:n.endsWith("%")||(n=parseFloat(n),(isNaN(n)||0==n)&&(n=void 0))),null!=i&&(""==i.trim()?i=void 0:i.endsWith("%")||(i=parseFloat(i),(isNaN(i)||0==i)&&(i=void 0)));var r={};return this.Model.IsOptionDisabled(e.Id)&&(r={pointerEvents:"none",opacity:.7}),o.createElement("div",{style:r,key:e.Id,className:(this.Model.IsOptionDisabled(e.Id)?"rnDisabled":"")+" rnImagePickerItem "+(this.Model.SelectedValues.some((function(t){return t==e.Id}))?"rnSelected":"")},o.createElement("div",{style:{position:"relative"}},o.createElement("div",{key:e.Id,className:" rnImagePickerImage",style:{width:n,height:i,overflow:"hidden"}},o.createElement("img",{onLoad:function(n){return t.InitializeZoom(n.target,""==e.URL.trim()?t.Model.FormBuilder.GetPluginURL()+"images/welcome/logo.png":e.URL)},style:{width:"100%",height:"100%"},src:""==e.URL.trim()?this.Model.FormBuilder.GetPluginURL()+"images/welcome/logo.png":e.URL,onClick:function(n){return t.ToggleSelected(e)}}))),""!=e.Label.trim()&&o.createElement("span",null,this.GetText(e,"Label")))}},{key:"ToggleSelected",value:function(e){if(!this.Model.IsOptionDisabled(e.Id)){var t=this.Model.SelectedValues.find((function(t){return t==e.Id}));this.Model.ToggleSelection(e.Id,null==t)}}},{key:"InitializeZoom",value:function(e,t){null!=this.Model.ZoomManager&&this.Model.ZoomManager.Execute(e,t)}},{key:"GenerateTableLayout",value:function(){var e=this,t=parseInt(this.props.Model.Options.Columns.toString());(isNaN(t)||t<=0)&&(t=3);for(var n=this.props.Model.Options.Options.length,i=Math.ceil(n/t),r=new Array(i),l=0;l<r.length;l++)r[l]=new Array(t);var u=0,a=0,s=!0,c=!1,p=void 0;try{for(var f,d=this.props.Model.Options.Options[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var m=f.value;r[u][a]=m,u>=r.length-1?(u=0,a+=1):u++}}catch(e){c=!0,p=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw p}}return o.createElement("table",{style:{width:"auto"}},o.createElement("tbody",null,r.map((function(t,n){return o.createElement("tr",{key:n},t.map((function(t,n){return o.createElement("td",{key:n},t&&e.GenerateImageItem(t))})))}))))}}])&&R(n.prototype,r),l&&R(n,l),t}(n(188).FBMultipleOptionsBase);j.defaultProps={},F.EventManager.Subscribe(y.GetModel,(function(e){if(e.Options.Type==h.FieldTypeEnum.ImagePicker)return new m(e.Options,e.parent).Initialize(e.PreviousData)})),F.EventManager.Subscribe(g.GetFieldOptions,(function(e){if(e.Type==h.FieldTypeEnum.ImagePicker)return new x})),F.EventManager.Subscribe(b.GetField,(function(e){if(e.Model.Options.Type==h.FieldTypeEnum.ImagePicker)return o.createElement(j,{Model:e.Model})}))},188:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBMultipleOptionsBase")},2:function(e,t){e.exports=RedNaoSharedCore.default("shared/core/Events/EventManager")},27:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Events/GetFieldOptions")},28:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Events/GetField")},29:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Events/GetModel")},3:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBFieldBase.options")},6:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBFieldWithPriceBase.Options")},66:function(e,t){e.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Options/OptionItem")}});