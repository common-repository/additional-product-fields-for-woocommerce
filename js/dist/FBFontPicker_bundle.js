var RedNaoFBFontPicker=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1505)}({0:function(t,e){t.exports=React},100:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBMultipleOptionsBase.Model")},117:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBMultipleOptionsBase.Options")},1505:function(t,e,i){"use strict";i.r(e),i.d(e,"FBFontPicker",(function(){return M}));var n=i(0),s=i(40),o=i(6),r=i(29),l=i(27),a=i(28),c=i(2),d=i(95),u=i(32),p=i(276),h=i.n(p);i(667);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(t){function e(t,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=v(this,m(e).call(this,t,i))).SelectedValues=void 0,n.IsFocused=void 0,n}var i,n,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,t),i=e,(n=[{key:"GetDynamicFieldNames",value:function(){return["FBFontPicker"]}},{key:"AllowMultiple",get:function(){return!1}}])&&g(i.prototype,n),s&&g(i,s),e}(i(100).FBMultipleOptionsBaseModel);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t,e,i){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function e(){var t,i;w(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=S(this,(t=F(e)).call.apply(t,[this].concat(s)))).Placeholder=void 0,i.ShowOptionsPrice=void 0,i.AllowMultiple=void 0,i.SkipWhenPriceIsZero=void 0,i.Prefix=void 0,i}var i,n,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,t),i=e,(n=[{key:"LoadDefaultValues",value:function(){I(F(e.prototype),"LoadDefaultValues",this).call(this),this.SkipWhenPriceIsZero=!0,this.AllowMultiple=!1,this.Type="fontpicker",this.Label="Font Picker",this.Placeholder="Please select a value",this.PriceType=o.PriceTypeEnum.options,this.ShowOptionsPrice=!1,this.Prefix=" +",this.Options=[]}}])&&_(i.prototype,n),s&&_(i,s),e}(i(117).FBMultipleOptionsBaseOptions);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M=function(t){function e(t){var i,n,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(i=!(s=P(e).call(this,t))||"object"!==k(s)&&"function"!=typeof s?E(n):s).TomSelect=void 0,i.Formatter=void 0,i.Formatter=document.createElement("div"),i.DropDownRendered=i.DropDownRendered.bind(E(i)),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,t),i=e,(s=[{key:"DropDownRendered",value:function(t){var e=this;if(null!=t){null!=this.TomSelect&&this.TomSelect.destroy();var i=function(t){var i=e.Model.Options.Options.find((function(e){return e.Id==t.optionId})),n=document.createElement("div");n.classList.add("searchableOption");var s=document.createElement("div");switch(s.classList.add("optionImage"),i.ImageType){case"icon":var o=e.Model.RootFormBuilder.GetIcon(i.Ref.Name),r=o.icon[0],l=o.icon[1],a="0 0 ".concat(r," ").concat(l),c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox",a),c.style.height="1em",c.setAttribute("fill","currentColor");var d=document.createElementNS("http://www.w3.org/2000/svg","path");c.appendChild(d),d.setAttribute("d",o.icon[4]),s.appendChild(c),n.appendChild(s);break;case"image":var u=document.createElement("div");u.classList.add("imageContainer"),u.style.backgroundImage="url('"+i.Ref.URL+"')",s.appendChild(u),n.appendChild(s)}var p=document.createElement("span");return p.innerText=t.text,p.style.fontFamily=t.text,n.appendChild(p),n},n={onChange:function(t){Array.isArray(t)?e.Model.SetSelection(t.map((function(t){return Number(t)}))):e.Model.SetSelection([t])},items:this.Model.SelectedValues,plugins:{},render:{option:function(t,e){return i(t)},item:function(t,e){return i(t)}}};this.Model.Options.AllowMultiple&&(n.plugins.remove_button={className:"rnOptionRemove"}),this.TomSelect=new h.a(t,n)}}},{key:"componentWillReceiveProps",value:function(t,e){if(this.Model.Parent.IsDesign){var i=this.props.Model.Options.Options.find((function(t){return t.Selected}));this.Model.SelectedValues=i?[i.Id]:[],this.Model.SetQuantity(this.Model.Options.QuantityDefaultValue),this.Model.Refresh()}}},{key:"SubRender",value:function(){return this.Model.Options.ShowQuantitySelector&&this.Model.Options.PriceType!=o.PriceTypeEnum.quantity?"bottom"==this.Model.Options.QuantityPosition||"right"==this.Model.Options.QuantityPosition?n.createElement(n.Fragment,null,this.GetInput(this.Model.Options.QuantityPosition),this.GetQuantityInput(),this.GetPriceOrRequiredBox()):n.createElement(n.Fragment,null,this.GetQuantityInput(),this.GetInput(this.Model.Options.QuantityPosition),this.GetPriceOrRequiredBox()):n.createElement(n.Fragment,null,this.GetInput(""),this.GetPriceOrRequiredBox())}},{key:"GetInput",value:function(t){var e=this;return n.createElement("div",{className:"rnTextFieldInput "+t+(this.Model.IsFocused?" RNFocus":"")},this.GetLabel(),n.createElement("select",{multiple:this.Model.Options.AllowMultiple,ref:this.DropDownRendered,onFocus:function(){e.Model.IsFocused=!0,e.Model.Refresh()},onBlur:function(){e.Model.IsFocused=!1,e.Model.Refresh()},className:"rnInputPrice",placeholder:this.Model.Options.Placeholder,style:{width:"100%"},value:0==this.Model.SelectedValues.length?"":this.Model.SelectedValues[0],onChange:function(t){return e.OnChange(t)}},n.createElement("option",{key:-1,value:""},this.Model.Options.Placeholder),this.Model.Options.Options.map((function(t){return n.createElement("option",{"data-option-id":t.Id,disabled:e.Model.IsOptionDisabled(t.Id),key:t.Id,value:t.Id},e.GetOptionLabel(t))}))))}},{key:"OnChange",value:function(t){this.Model.ToggleSelection(t.target.value,!0)}},{key:"GetOptionLabel",value:function(t){var e=t.Label;return this.props.Model.Options.ShowOptionsPrice&&(!this.props.Model.Options.SkipWhenPriceIsZero||u.Sanitizer.SanitizeNumber(t.RegularPrice)>0)&&(e+=this.props.Model.Options.Prefix+d.CurrencyManager.FormatPrice(t.RegularPrice),this.Formatter.innerHTML=e,e=this.Formatter.innerText),e}}])&&A(i.prototype,s),r&&A(i,r),e}(s.FBFieldWithPriceBase);M.defaultProps={},c.EventManager.Subscribe(r.GetModel,(function(t){if("fontpicker"==t.Options.Type)return new b(t.Options,t.parent).Initialize(t.PreviousData)})),c.EventManager.Subscribe(l.GetFieldOptions,(function(t){if("fontpicker"==t.Type)return new x})),c.EventManager.Subscribe(a.GetField,(function(t){if("fontpicker"==t.Model.Options.Type)return n.createElement(M,{Model:t.Model})}))},2:function(t,e){t.exports=RedNaoSharedCore.default("shared/core/Events/EventManager")},27:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Events/GetFieldOptions")},276:function(t,e,i){t.exports=function(){"use strict";function t(t,e){t.split(/\s+/).forEach(t=>{e(t)})}class e{constructor(){this._events=void 0,this._events={}}on(e,i){t(e,t=>{this._events[t]=this._events[t]||[],this._events[t].push(i)})}off(e,i){var n=arguments.length;0!==n?t(e,t=>{if(1===n)return delete this._events[t];t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(i),1)}):this._events={}}trigger(e,...i){var n=this;t(e,t=>{if(t in n._events!=0)for(let e of n._events[t])e.apply(n,i)})}}var i;const n=new RegExp("[̀-ͯ·ʾ]","g");var s;const o={"æ":"ae","ⱥ":"a","ø":"o"},r=new RegExp(Object.keys(o).join("|"),"g"),l=[[67,67],[160,160],[192,438],[452,652],[961,961],[1019,1019],[1083,1083],[1281,1289],[1984,1984],[5095,5095],[7429,7441],[7545,7549],[7680,7935],[8580,8580],[9398,9449],[11360,11391],[42792,42793],[42802,42851],[42873,42897],[42912,42922],[64256,64260],[65313,65338],[65345,65370]],a=t=>t.normalize("NFKD").replace(n,"").toLowerCase().replace(r,(function(t){return o[t]})),c=(t,e="|")=>{if(1==t.length)return t[0];var i=1;return t.forEach(t=>{i=Math.max(i,t.length)}),1==i?"["+t.join("")+"]":"(?:"+t.join(e)+")"},d=t=>{if(1===t.length)return[[t]];var e=[];return d(t.substring(1)).forEach((function(i){var n=i.slice(0);n[0]=t.charAt(0)+n[0],e.push(n),(n=i.slice(0)).unshift(t.charAt(0)),e.push(n)})),e},u=t=>(void 0===s&&(s=(()=>{var t={};l.forEach(e=>{for(let n=e[0];n<=e[1];n++){let e=String.fromCharCode(n),s=a(e);if(s!=e.toLowerCase()){s in t||(t[s]=[s]);var i=new RegExp(c(t[s]),"iu");e.match(i)||t[s].push(e)}}});var e=Object.keys(t);e=e.sort((t,e)=>e.length-t.length),i=new RegExp("("+c(e)+"[̀-ͯ·ʾ]*)","g");var n={};return e.sort((t,e)=>t.length-e.length).forEach(e=>{var i=d(e).map(e=>(e=e.map(e=>t.hasOwnProperty(e)?c(t[e]):e),c(e,"")));n[e]=c(i)}),n})()),t.normalize("NFKD").toLowerCase().split(i).map(t=>{if(""==t)return"";const e=a(t);if(s.hasOwnProperty(e))return s[e];const i=t.normalize("NFC");return i!=t?c([t,i]):t}).join("")),p=(t,e)=>{if(t)return t[e]},h=(t,e)=>{if(t){for(var i,n=e.split(".");(i=n.shift())&&(t=t[i]););return t}},f=(t,e,i)=>{var n,s;return t?-1===(s=(t+="").search(e.regex))?0:(n=e.string.length/t.length,0===s&&(n+=.5),n*i):0},g=t=>(t+"").replace(/([\$\(-\+\.\?\[-\^\{-\}])/g,"\\$1"),v=(t,e)=>{var i=t[e];if("function"==typeof i)return i;i&&!Array.isArray(i)&&(t[e]=[i])},m=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},y=(t,e)=>"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=a(t+"").toLowerCase())>(e=a(e+"").toLowerCase())?1:e>t?-1:0;class b{constructor(t,e){this.items=void 0,this.settings=void 0,this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const n=[],s=t.split(/\s+/);var o;return i&&(o=new RegExp("^("+Object.keys(i).map(g).join("|")+"):(.*)$")),s.forEach(t=>{let i,s=null,r=null;o&&(i=t.match(o))&&(s=i[1],t=i[2]),t.length>0&&(r=g(t),this.settings.diacritics&&(r=u(r)),e&&(r="\\b"+r)),n.push({string:t,regex:r?new RegExp(r,"iu"):null,field:s})}),n}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const n=t.options.fields,s=t.weights,o=n.length,r=t.getAttrFn;if(!o)return function(){return 1};const l=1===o?function(t,e){const i=n[0].field;return f(r(e,i),t,s[i])}:function(t,e){var i=0;if(t.field){const n=r(e,t.field);!t.regex&&n?i+=1/o:i+=f(n,t,1)}else m(s,(n,s)=>{i+=f(r(e,s),t,n)});return i/o};return 1===i?function(t){return l(e[0],t)}:"and"===t.options.conjunction?function(t){for(var n,s=0,o=0;s<i;s++){if((n=l(e[s],t))<=0)return 0;o+=n}return o/i}:function(t){var n=0;return m(e,e=>{n+=l(e,t)}),n/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i,n;const s=this,o=t.options,r=!t.query&&o.sort_empty?o.sort_empty:o.sort,l=[],a=[];if("function"==typeof r)return r.bind(this);const c=function(e,i){return"$score"===e?i.score:t.getAttrFn(s.items[i.id],e)};if(r)for(e=0,i=r.length;e<i;e++)(t.query||"$score"!==r[e].field)&&l.push(r[e]);if(t.query){for(n=!0,e=0,i=l.length;e<i;e++)if("$score"===l[e].field){n=!1;break}n&&l.unshift({field:"$score",direction:"desc"})}else for(e=0,i=l.length;e<i;e++)if("$score"===l[e].field){l.splice(e,1);break}for(e=0,i=l.length;e<i;e++)a.push("desc"===l[e].direction?-1:1);const d=l.length;if(d){if(1===d){const t=l[0].field,e=a[0];return function(i,n){return e*y(c(t,i),c(t,n))}}return function(t,e){var i,n,s;for(i=0;i<d;i++)if(s=l[i].field,n=a[i]*y(c(s,t),c(s,e)))return n;return 0}}return null}prepareSearch(t,e){const i={};var n=Object.assign({},e);if(v(n,"sort"),v(n,"sort_empty"),n.fields){v(n,"fields");const t=[];n.fields.forEach(e=>{"string"==typeof e&&(e={field:e,weight:1}),t.push(e),i[e.field]="weight"in e?e.weight:1}),n.fields=t}return{options:n,query:t.toLowerCase().trim(),tokens:this.tokenize(t,n.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:n.nesting?h:p}}search(t,e){var i,n;n=this.prepareSearch(t,e),e=n.options,t=n.query;const s=e.score||this._getScoreFunction(n);t.length?m(this.items,(t,o)=>{i=s(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:o})}):m(this.items,(t,e)=>{n.items.push({score:1,id:e})});const o=this._getSortFunction(n);return o&&n.items.sort(o),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n}}const O=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(w(t)){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)},w=t=>"string"==typeof t&&t.indexOf("<")>-1,_=(t,e)=>{var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)},S=(t,e)=>{Object.assign(t.style,e)},I=(t,...e)=>{var i=C(e);(t=x(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},F=(t,...e)=>{var i=C(e);(t=x(t)).map(t=>{i.map(e=>{t.classList.remove(e)})})},C=t=>{var e=[];return m(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\11\12\14\15\40]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},x=t=>(Array.isArray(t)||(t=[t]),t),k=(t,e,i)=>{if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},A=(t,e=0)=>e>0?t[t.length-1]:t[0],P=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},E=(t,e)=>{m(e,(e,i)=>{null==e?t.removeAttribute(i):t.setAttribute(i,""+e)})},L=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},M=(t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=new RegExp(e,"i")}const i=t=>3===t.nodeType?(t=>{var i=t.data.match(e);if(i&&t.data.length>0){var n=document.createElement("span");n.className="highlight";var s=t.splitText(i.index);s.splitText(i[0].length);var o=s.cloneNode(!0);return n.appendChild(o),L(s,n),1}return 0})(t):((t=>{if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var e=0;e<t.childNodes.length;++e)e+=i(t.childNodes[e])})(t),0);i(t)},T="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var j={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};const R=t=>null==t?null:B(t),B=t=>"boolean"==typeof t?t?"1":"0":t+"",N=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),V=(t,e)=>{var i;return function(n,s){var o=this;i&&(o.loading=Math.max(o.loading-1,0),clearTimeout(i)),i=setTimeout((function(){i=null,o.loadedSearches[n]=!0,t.call(o,n,s)}),e)}},D=(t,e,i)=>{var n,s=t.trigger,o={};for(n of(t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return s.apply(t,arguments);o[i]=arguments},i.apply(t,[]),t.trigger=s,e))n in o&&s.apply(t,o[n])},q=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},z=(t,e,i,n)=>{t.addEventListener(e,i,n)},G=(t,e)=>!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0),H=(t,e)=>{const i=t.getAttribute("id");return i||(t.setAttribute("id",e),e)},Q=t=>t.replace(/[\\"']/g,"\\$&"),K=(t,e)=>{e&&t.append(e)};function U(t,e){var i=Object.assign({},j,e),n=i.dataAttr,s=i.labelField,o=i.valueField,r=i.disabledField,l=i.optgroupField,a=i.optgroupLabelField,c=i.optgroupValueField,d=t.tagName.toLowerCase(),u=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!u&&!i.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(u=e.textContent)}var p,h,f,g,v,y,b={placeholder:u,options:[],optgroups:[],items:[],maxItems:null};return"select"===d?(h=b.options,f={},g=1,v=t=>{var e=Object.assign({},t.dataset),i=n&&e[n];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},y=(t,e)=>{var n=R(t.value);if(null!=n&&(n||i.allowEmptyOption)){if(f.hasOwnProperty(n)){if(e){var a=f[n][l];a?Array.isArray(a)?a.push(e):f[n][l]=[a,e]:f[n][l]=e}}else{var c=v(t);c[s]=c[s]||t.textContent,c[o]=c[o]||n,c[r]=c[r]||t.disabled,c[l]=c[l]||e,c.$option=t,f[n]=c,h.push(c)}t.selected&&b.items.push(n)}},b.maxItems=t.hasAttribute("multiple")?null:1,m(t.children,t=>{var e,i,n;"optgroup"===(p=t.tagName.toLowerCase())?((n=v(e=t))[a]=n[a]||e.getAttribute("label")||"",n[c]=n[c]||g++,n[r]=n[r]||e.disabled,b.optgroups.push(n),i=n[c],m(e.children,t=>{y(t,i)})):"option"===p&&y(t)})):(()=>{const e=t.getAttribute(n);if(e)b.options=JSON.parse(e),m(b.options,t=>{b.items.push(t[o])});else{var r=t.value.trim()||"";if(!i.allowEmptyOption&&!r.length)return;const e=r.split(i.delimiter);m(e,t=>{const e={};e[s]=t,e[o]=t,b.options.push(e)}),b.items=e}})(),Object.assign({},j,b,e)}var W=0;class Z extends(function(t){return t.plugins={},class extends t{constructor(...t){super(...t),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,i){t.plugins[e]={name:e,fn:i}}initializePlugins(t){var e,i;const n=this,s=[];if(Array.isArray(t))t.forEach(t=>{"string"==typeof t?s.push(t):(n.plugins.settings[t.name]=t.options,s.push(t.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(n.plugins.settings[e]=t[e],s.push(e));for(;i=s.shift();)n.require(i)}loadPlugin(e){var i=this.plugins,n=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=n.fn.apply(this,[this.plugins.settings[e]||{}]),i.names.push(e)}require(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]}}}(e)){constructor(t,e){var i;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],W++;var n=O(t);if(n.tomselect)throw new Error("Tom Select already initialized on this element");n.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(n,null)).getPropertyValue("direction");const s=U(n,e);this.settings=s,this.input=n,this.tabIndex=n.tabIndex||0,this.is_select_tag="select"===n.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=H(n,"tomselect-"+W),this.isRequired=n.required,this.sifter=new b(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(1===s.maxItems?"single":"multi"),"boolean"!=typeof s.hideSelected&&(s.hideSelected="multi"===s.mode),"boolean"!=typeof s.hidePlaceholder&&(s.hidePlaceholder="multi"!==s.mode);var o=s.createFilter;"function"!=typeof o&&("string"==typeof o&&(o=new RegExp(o)),o instanceof RegExp?s.createFilter=t=>o.test(t):s.createFilter=t=>this.settings.duplicates||!this.options[t]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();const r=O("<div>"),l=O("<div>"),a=this._render("dropdown"),c=O('<div role="listbox" tabindex="-1">'),d=this.input.getAttribute("class")||"",u=s.mode;var p;I(r,s.wrapperClass,d,u),I(l,s.controlClass),K(r,l),I(a,s.dropdownClass,u),s.copyClassesToDropdown&&I(a,d),I(c,s.dropdownContentClass),K(a,c),O(s.dropdownParent||r).appendChild(a),w(s.controlInput)?(p=O(s.controlInput),m(["autocorrect","autocapitalize","autocomplete"],t=>{n.getAttribute(t)&&E(p,{[t]:n.getAttribute(t)})}),p.tabIndex=-1,l.appendChild(p),this.focus_node=p):s.controlInput?(p=O(s.controlInput),this.focus_node=p):(p=O("<input/>"),this.focus_node=l),this.wrapper=r,this.dropdown=a,this.dropdown_content=c,this.control=l,this.control_input=p,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,n=t.dropdown,s=t.dropdown_content,o=t.wrapper,r=t.control,l=t.input,a=t.focus_node,c={passive:!0},d=t.inputId+"-ts-dropdown";E(s,{id:d}),E(a,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":d});const u=H(a,t.inputId+"-ts-control"),p="label[for='"+(t=>t.replace(/['"\\]/g,"\\$&"))(t.inputId)+"']",h=document.querySelector(p),f=t.focus.bind(t);if(h){z(h,"click",f),E(h,{for:u});const e=H(h,t.inputId+"-ts-label");E(a,{"aria-labelledby":e}),E(s,{"aria-labelledby":e})}if(o.style.width=l.style.width,t.plugins.names.length){const e="plugin-"+t.plugins.names.join(" plugin-");I([o,n],e)}(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&E(l,{multiple:"multiple"}),e.placeholder&&E(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+g(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=V(e.load,e.loadThrottle)),t.control_input.type=l.type,z(n,"click",e=>{const i=k(e.target,"[data-selectable]");i&&(t.onOptionSelect(e,i),q(e,!0))}),z(r,"click",e=>{var n=k(e.target,"[data-ts-item]",r);n&&t.onItemSelect(e,n)?q(e,!0):""==i.value&&(t.onClick(),q(e,!0))}),z(a,"keydown",e=>t.onKeyDown(e)),z(i,"keypress",e=>t.onKeyPress(e)),z(i,"input",e=>t.onInput(e)),z(a,"resize",()=>t.positionDropdown(),c),z(a,"blur",e=>t.onBlur(e)),z(a,"focus",e=>t.onFocus(e)),z(a,"paste",e=>t.onPaste(e));const v=e=>{const s=e.composedPath()[0];if(!o.contains(s)&&!n.contains(s))return t.isFocused&&t.blur(),void t.inputState();s==i&&t.isOpen?e.stopPropagation():q(e,!0)};var m=()=>{t.isOpen&&t.positionDropdown()};z(document,"mousedown",v),z(window,"scroll",m,c),z(window,"resize",m,c),this._destroy=()=>{document.removeEventListener("mousedown",v),window.removeEventListener("scroll",m),window.removeEventListener("resize",m),h&&h.removeEventListener("click",f)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,z(l,"invalid",e=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,l.disabled?t.disable():t.enable(),t.on("change",this.onChange),I(l,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),m(e,t=>{this.registerOptionGroup(t)})}setupTemplates(){var t=this.settings.labelField,e=this.settings.optgroupLabelField,i={optgroup:t=>{let e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,i)=>'<div class="optgroup-header">'+i(t[e])+"</div>",option:(e,i)=>"<div>"+i(e[t])+"</div>",item:(e,i)=>"<div>"+i(e[t])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};this.settings.render=Object.assign({},i,this.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)}sync(t=!0){const e=t?U(this.input,{delimiter:this.settings.delimiter}):this.settings;this.setupOptions(e.options,e.optgroups),this.setValue(e.items||[],!0),this.lastQuery=null}onClick(){if(this.activeItems.length>0)return this.clearActiveItems(),void this.focus();this.isFocused&&this.isOpen?this.blur():this.focus()}onMouseDown(){}onChange(){_(this.input,"input"),_(this.input,"change")}onPaste(t){var e=this;e.isInputHidden||e.isLocked?q(t):e.settings.splitOn&&setTimeout(()=>{var t=e.inputValue();if(t.match(e.settings.splitOn)){var i=t.trim().split(e.settings.splitOn);m(i,t=>{e.createItem(t)})}},0)}onKeyPress(t){if(!this.isLocked){var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),void q(t)):void 0}q(t)}onKeyDown(t){if(this.isLocked)9!==t.keyCode&&q(t);else{switch(t.keyCode){case 65:if(G(T,t)&&""==this.control_input.value)return q(t),void this.selectAll();break;case 27:return this.isOpen&&(q(t,!0),this.close()),void this.clearActiveItems();case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.activeOption){let t=this.getAdjacent(this.activeOption,1);t&&this.setActiveOption(t)}return void q(t);case 38:if(this.activeOption){let t=this.getAdjacent(this.activeOption,-1);t&&this.setActiveOption(t)}return void q(t);case 13:return void(this.canSelect(this.activeOption)?(this.onOptionSelect(t,this.activeOption),q(t)):this.settings.create&&this.createItem()&&q(t));case 37:return void this.advanceSelection(-1,t);case 39:return void this.advanceSelection(1,t);case 9:return void(this.settings.selectOnTab&&(this.canSelect(this.activeOption)&&(this.onOptionSelect(t,this.activeOption),q(t)),this.settings.create&&this.createItem()&&q(t)));case 8:case 46:return void this.deleteSelection(t)}this.isInputHidden&&!G(T,t)&&q(t)}}onInput(t){if(!this.isLocked){var e=this.inputValue();this.lastValue!==e&&(this.lastValue=e,this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e))}}onFocus(t){var e=this.isFocused;if(this.isDisabled)return this.blur(),void q(t);this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.preload(),e||this.trigger("focus"),this.activeItems.length||(this.showInput(),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())}onBlur(t){if(!1!==document.hasFocus()){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,!1,i):i()}}}onOptionSelect(t,e){var i,n=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?n.createItem(null,!0,()=>{n.settings.closeAfterSelect&&n.close()}):void 0!==(i=e.dataset.value)&&(n.lastQuery=null,n.addItem(i),n.settings.closeAfterSelect&&n.close(),!n.settings.hideSelected&&t.type&&/click/.test(t.type)&&n.setActiveOption(e)))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){return!this.isLocked&&"multi"===this.settings.mode&&(q(t),this.setActiveItem(e,t),!0)}canLoad(t){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(t)}load(t){if(!this.canLoad(t))return;I(this.wrapper,this.settings.loadingClass),this.loading++;const e=this.loadCallback.bind(this);this.settings.load.call(this,t,e)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||F(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,_(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){D(this,e?[]:["change"],()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i,n,s,o,r,l;if("single"!==this.settings.mode){if(!t)return this.clearActiveItems(),void(this.isFocused&&this.showInput());if("click"===(i=e&&e.type.toLowerCase())&&G("shiftKey",e)&&this.activeItems.length){for(l=this.getLastActive(),(s=Array.prototype.indexOf.call(this.control.children,l))>(o=Array.prototype.indexOf.call(this.control.children,t))&&(r=s,s=o,o=r),n=s;n<=o;n++)t=this.control.children[n],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);q(e)}else"click"===i&&G(T,e)||"keydown"===i&&G("shiftKey",e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(this.clearActiveItems(),this.setActiveItemClass(t));this.hideInput(),this.isFocused||this.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&F(i,"last-active"),I(t,"active last-active"),e.trigger("item_select",t),-1==e.activeItems.indexOf(t)&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),F(t,"active")}clearActiveItems(){F(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,E(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),E(t,{"aria-selected":"true"}),I(t,"active"),this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,n=i.clientHeight,s=i.scrollTop||0,o=t.offsetHeight,r=t.getBoundingClientRect().top-i.getBoundingClientRect().top+s;r+o>n+s?this.scroll(r-n+o,e):r<s&&this.scroll(r,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(F(this.activeOption,"active"),E(this.activeOption,{"aria-selected":null})),this.activeOption=null,E(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if("single"===t.settings.mode)return;const e=t.controlChildren();e.length&&(t.hideInput(),t.close(),t.activeItems=e,m(e,e=>{t.setActiveItemClass(e)}))}inputState(){this.control.contains(this.control_input)&&(E(this.control_input,{placeholder:this.settings.placeholder}),this.activeItems.length>0||!this.isFocused&&this.settings.hidePlaceholder&&this.items.length>0?(this.setTextboxValue(),this.isInputHidden=!0):(this.settings.hidePlaceholder&&this.items.length>0&&E(this.control_input,{placeholder:""}),this.isInputHidden=!1),this.wrapper.classList.toggle("input-hidden",this.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,n,s=this.getSearchOptions();if(this.settings.score&&"function"!=typeof(n=this.settings.score.call(this,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,i=this.sifter.search(t,Object.assign(s,{score:n})),this.currentResults=i):i=Object.assign({},this.currentResults),this.settings.hideSelected)for(e=i.items.length-1;e>=0;e--){let t=R(i.items[e].id);t&&-1!==this.items.indexOf(t)&&i.items.splice(e,1)}return i}refreshOptions(t=!0){var e,i,n,s,o,r,l,a,c,d,u;const p={},h=[];var f,g=this,v=g.inputValue(),y=g.search(v),b=null,O=g.settings.shouldOpen||!1,w=g.dropdown_content;for(g.activeOption&&(c=g.activeOption.dataset.value,d=g.activeOption.closest("[data-group]")),s=y.items.length,"number"==typeof g.settings.maxOptions&&(s=Math.min(s,g.settings.maxOptions)),s>0&&(O=!0),e=0;e<s;e++){let t=y.items[e].id,s=g.options[t],l=g.getOption(t,!0);for(g.settings.hideSelected||l.classList.toggle("selected",g.items.includes(t)),o=s[g.settings.optgroupField]||"",i=0,n=(r=Array.isArray(o)?o:[o])&&r.length;i<n;i++)o=r[i],g.optgroups.hasOwnProperty(o)||(o=""),p.hasOwnProperty(o)||(p[o]=document.createDocumentFragment(),h.push(o)),i>0&&(l=l.cloneNode(!0),E(l,{id:s.$id+"-clone-"+i,"aria-selected":null}),l.classList.add("ts-cloned"),F(l,"active")),b||c!=t||(d?d.dataset.group===o&&(b=l):b=l),p[o].appendChild(l)}this.settings.lockOptgroupOrder&&h.sort((t,e)=>(g.optgroups[t]&&g.optgroups[t].$order||0)-(g.optgroups[e]&&g.optgroups[e].$order||0)),l=document.createDocumentFragment(),m(h,t=>{if(g.optgroups.hasOwnProperty(t)&&p[t].children.length){let e=document.createDocumentFragment(),i=g.render("optgroup_header",g.optgroups[t]);K(e,i),K(e,p[t]);let n=g.render("optgroup",{group:g.optgroups[t],options:e});K(l,n)}else K(l,p[t])}),w.innerHTML="",K(w,l),g.settings.highlight&&(f=w.querySelectorAll("span.highlight"),Array.prototype.forEach.call(f,(function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()})),y.query.length&&y.tokens.length&&m(y.tokens,t=>{M(w,t.regex)}));var _=t=>{let e=g.render(t,{input:v});return e&&(O=!0,w.insertBefore(e,w.firstChild)),e};if(g.loading?_("loading"):g.settings.shouldLoad.call(g,v)?0===y.items.length&&_("no_results"):_("not_loading"),(a=g.canCreate(v))&&(u=_("option_create")),g.hasOptions=y.items.length>0||a,O){if(y.items.length>0){if(!b&&"single"===g.settings.mode&&g.items.length&&(b=g.getOption(g.items[0])),!w.contains(b)){let t=0;u&&!g.settings.addPrecedence&&(t=1),b=g.selectable()[t]}}else u&&(b=u);t&&!g.isOpen&&(g.open(),g.scrollToOption(b,"auto")),g.setActiveOption(b)}else g.clearActiveOption(),t&&g.isOpen&&g.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const n=R(t[i.settings.valueField]);return null!==n&&!i.options.hasOwnProperty(n)&&(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[n]=t,i.lastQuery=null,e&&(i.userOptions[n]=e,i.trigger("option_add",n,t)),n)}addOptions(t,e=!1){m(t,t=>{this.addOption(t,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=R(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var n,s;const o=R(t),r=R(e[i.settings.valueField]);if(null===o)return;if(!i.options.hasOwnProperty(o))return;if("string"!=typeof r)throw new Error("Value must be set in option data");const l=i.getOption(o),a=i.getItem(o);if(e.$order=e.$order||i.options[o].$order,delete i.options[o],i.uncacheValue(r),i.options[r]=e,l){if(i.dropdown_content.contains(l)){const t=i._render("option",e);L(l,t),i.activeOption===l&&i.setActiveOption(t)}l.remove()}a&&(-1!==(s=i.items.indexOf(o))&&i.items.splice(s,1,r),n=i._render("item",e),a.classList.contains("active")&&I(n,"active"),L(a,n)),i.lastQuery=null}removeOption(t,e){t=B(t),this.uncacheValue(t),delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)}clearOptions(){this.loadedSearches={},this.userOptions={},this.clearCache();var t={};m(this.options,(e,i)=>{this.items.indexOf(i)>=0&&(t[i]=this.options[i])}),this.options=this.sifter.items=t,this.lastQuery=null,this.trigger("option_clear")}getOption(t,e=!1){const i=R(t);if(null!==i&&this.options.hasOwnProperty(i)){const t=this.options[i];if(t.$div)return t.$div;if(e)return this._render("option",t)}return null}getAdjacent(t,e,i="option"){var n;if(!t)return null;n="item"==i?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<n.length;i++)if(n[i]==t)return e>0?n[i+1]:n[i-1];return null}getItem(t){if("object"==typeof t)return t;var e=R(t);return null!==e?this.control.querySelector(`[data-value="${Q(e)}"]`):null}addItems(t,e){var i=this,n=Array.isArray(t)?t:[t];for(let t=0,s=(n=n.filter(t=>-1===i.items.indexOf(t))).length;t<s;t++)i.isPending=t<s-1,i.addItem(n[t],e)}addItem(t,e){D(this,e?[]:["change","dropdown_close"],()=>{var i,n;const s=this,o=s.settings.mode,r=R(t);if((!r||-1===s.items.indexOf(r)||("single"===o&&s.close(),"single"!==o&&s.settings.duplicates))&&null!==r&&s.options.hasOwnProperty(r)&&("single"===o&&s.clear(e),"multi"!==o||!s.isFull())){if(i=s._render("item",s.options[r]),s.control.contains(i)&&(i=i.cloneNode(!0)),n=s.isFull(),s.items.splice(s.caretPos,0,r),s.insertAtCaret(i),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let t=s.getOption(r),e=s.getAdjacent(t,1);e&&s.setActiveOption(e)}s.isPending||s.settings.closeAfterSelect||s.refreshOptions(s.isFocused&&"single"!==o),0!=s.settings.closeAfterSelect&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",r,i),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!n&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){const i=this;if(!(t=i.getItem(t)))return;var n,s;const o=t.dataset.value;n=P(t),t.remove(),t.classList.contains("active")&&(s=i.activeItems.indexOf(t),i.activeItems.splice(s,1),F(t,"active")),i.items.splice(n,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(o)&&i.removeOption(o,e),n<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",o,t)}createItem(t=null,e=!0,i=(()=>{})){var n,s=this,o=s.caretPos;if(t=t||s.inputValue(),!s.canCreate(t))return i(),!1;s.lock();var r=!1,l=t=>{if(s.unlock(),!t||"object"!=typeof t)return i();var e=R(t[s.settings.valueField]);if("string"!=typeof e)return i();s.setTextboxValue(),s.addOption(t,!0),s.setCaret(o),s.addItem(e),i(t),r=!0};return n="function"==typeof s.settings.create?s.settings.create.call(this,t,l):{[s.settings.labelField]:t,[s.settings.valueField]:t},r||l(n),!0}refreshItems(){this.lastQuery=null,this.isSetup&&this.addItems(this.items),this.updateOriginalInput(),this.refreshState()}refreshState(){this.refreshValidityState();const t=this.isFull(),e=this.isLocked;this.wrapper.classList.toggle("rtl",this.rtl);const i=this.wrapper.classList;var n;i.toggle("focus",this.isFocused),i.toggle("disabled",this.isDisabled),i.toggle("required",this.isRequired),i.toggle("invalid",!this.isValid),i.toggle("locked",e),i.toggle("full",t),i.toggle("input-active",this.isFocused&&!this.isInputHidden),i.toggle("dropdown-active",this.isOpen),i.toggle("has-options",(n=this.options,0===Object.keys(n).length)),i.toggle("has-items",this.items.length>0)}refreshValidityState(){this.input.checkValidity&&(this.isValid=this.input.checkValidity(),this.isInvalid=!this.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,n;const s=e.input.querySelector('option[value=""]');if(e.is_select_tag){const t=[],r=e.input.querySelectorAll("option:checked").length;function o(i,n,o){return i||(i=O('<option value="'+N(n)+'">'+N(o)+"</option>")),i!=s&&e.input.append(i),t.push(i),(i!=s||r>0)&&(i.selected=!0),i}e.input.querySelectorAll("option:checked").forEach(t=>{t.selected=!1}),0==e.items.length&&"single"==e.settings.mode?o(s,"",""):e.items.forEach(s=>{i=e.options[s],n=i[e.settings.labelField]||"",t.includes(i.$option)?o(e.input.querySelector(`option[value="${Q(s)}"]:not(:checked)`),s,n):i.$option=o(i.$option,s,n)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.isOpen=!0,E(this.focus_node,{"aria-expanded":"true"}),this.refreshState(),S(this.dropdown,{visibility:"hidden",display:"block"}),this.positionDropdown(),S(this.dropdown,{visibility:"visible",display:"block"}),this.focus(),this.trigger("dropdown_open",this.dropdown))}close(t=!0){var e=this.isOpen;t&&(this.setTextboxValue(),"single"===this.settings.mode&&this.items.length&&this.hideInput()),this.isOpen=!1,E(this.focus_node,{"aria-expanded":"false"}),S(this.dropdown,{display:"none"}),this.settings.hideSelected&&this.clearActiveOption(),this.refreshState(),e&&this.trigger("dropdown_close",this.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX;S(this.dropdown,{width:e.width+"px",top:i+"px",left:n+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();m(i,t=>{e.removeItem(t,!0)}),e.showInput(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this.caretPos,i=this.control;i.insertBefore(t,i.children[e]),this.setCaret(e+1)}deleteSelection(t){var e,i,n,s,o;e=t&&8===t.keyCode?-1:1,i={start:(o=this.control_input).selectionStart||0,length:(o.selectionEnd||0)-(o.selectionStart||0)};const r=[];if(this.activeItems.length)s=A(this.activeItems,e),n=P(s),e>0&&n++,m(this.activeItems,t=>r.push(t));else if((this.isFocused||"single"===this.settings.mode)&&this.items.length){const t=this.controlChildren();e<0&&0===i.start&&0===i.length?r.push(t[this.caretPos-1]):e>0&&i.start===this.inputValue().length&&r.push(t[this.caretPos])}const l=r.map(t=>t.dataset.value);if(!l.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.call(this,l,t))return!1;for(q(t,!0),void 0!==n&&this.setCaret(n);r.length;)this.removeItem(r.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!1),!0}advanceSelection(t,e){var i,n;this.rtl&&(t*=-1),this.inputValue().length||(G(T,e)||G("shiftKey",e)?(n=(i=this.getLastActive(t))?i.classList.contains("active")?this.getAdjacent(i,t,"item"):i:t>0?this.control_input.nextElementSibling:this.control_input.previousElementSibling)&&(n.classList.contains("active")&&this.removeActiveItem(i),this.setActiveItemClass(n)):this.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");return i?A(i,t):void 0}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){this.input.disabled=!0,this.control_input.disabled=!0,this.focus_node.tabIndex=-1,this.isDisabled=!0,this.close(),this.lock()}enable(){this.input.disabled=!1,this.control_input.disabled=!1,this.focus_node.tabIndex=this.tabIndex,this.isDisabled=!1,this.unlock()}destroy(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML=t.innerHTML,this.input.tabIndex=t.tabIndex,F(this.input,"tomselected","ts-hidden-accessible"),this._destroy(),delete this.input.tomselect}render(t,e){return"function"!=typeof this.settings.render[t]?null:this._render(t,e)}_render(t,e){var i,n,s="";const o=this;return"option"!==t&&"item"!=t||(s=B(e[o.settings.valueField])),null==(n=o.settings.render[t].call(this,e,N))||(n=O(n),"option"===t||"option_create"===t?e[o.settings.disabledField]?E(n,{"aria-disabled":"true"}):E(n,{"data-selectable":""}):"optgroup"===t&&(i=e.group[o.settings.optgroupValueField],E(n,{"data-group":i}),e.group[o.settings.disabledField]&&E(n,{"data-disabled":""})),"option"!==t&&"item"!==t||(E(n,{"data-value":s}),"item"===t?(I(n,o.settings.itemClass),E(n,{"data-ts-item":""})):(I(n,o.settings.optionClass),E(n,{role:"option",id:e.$id}),o.options[s].$div=n))),n}clearCache(){m(this.options,(t,e)=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var n=this,s=n[e];n[e]=function(){var e,o;return"after"===t&&(e=s.apply(n,arguments)),o=i.apply(n,arguments),"instead"===t?o:("before"===t&&(e=s.apply(n,arguments)),e)}}}return Z.define("change_listener",(function(){z(this.input,"change",()=>{this.sync()})})),Z.define("checkbox_options",(function(){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;var i=function(t){setTimeout(()=>{var e=t.querySelector("input");t.classList.contains("selected")?e.checked=!0:e.checked=!1},1)};t.hook("after","setupTemplates",()=>{var e=t.settings.render.option;t.settings.render.option=(i,n)=>{var s=O(e.call(t,i,n)),o=document.createElement("input");o.addEventListener("click",(function(t){q(t)})),o.type="checkbox";const r=R(i[t.settings.valueField]);return r&&t.items.indexOf(r)>-1&&(o.checked=!0),s.prepend(o),s}}),t.on("item_remove",e=>{var n=t.getOption(e);n&&(n.classList.remove("selected"),i(n))}),t.on("item_add",e=>{var n=t.getOption(e);n&&i(n)}),t.hook("instead","onOptionSelect",(n,s)=>{if(s.classList.contains("selected"))return s.classList.remove("selected"),t.removeItem(s.dataset.value),t.refreshOptions(),void q(n,!0);e.call(t,n,s),i(s)})})),Z.define("clear_button",(function(t){const e=this,i=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&times;</div>`},t);e.on("initialize",()=>{var t=O(i.html(i));t.addEventListener("click",t=>{e.isDisabled||(e.clear(),"single"===e.settings.mode&&e.settings.allowEmptyOption&&e.addItem(""),t.preventDefault(),t.stopPropagation())}),e.control.appendChild(t)})})),Z.define("drag_drop",(function(){var t=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===t.settings.mode){var e=t.lock,i=t.unlock;t.hook("instead","lock",()=>{var i=$(t.control).data("sortable");return i&&i.disable(),e.call(t)}),t.hook("instead","unlock",()=>{var e=$(t.control).data("sortable");return e&&e.enable(),i.call(t)}),t.on("initialize",()=>{var e=$(t.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:(t,i)=>{i.placeholder.css("width",i.helper.css("width")),e.css({overflow:"visible"})},stop:()=>{e.css({overflow:"hidden"});var i=[];e.children("[data-value]").each((function(){this.dataset.value&&i.push(this.dataset.value)})),t.setValue(i)}})})}})),Z.define("dropdown_header",(function(t){const e=this,i=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t);e.on("initialize",()=>{var t=O(i.html(i)),n=t.querySelector("."+i.closeClass);n&&n.addEventListener("click",t=>{q(t,!0),e.close()}),e.dropdown.insertBefore(t,e.dropdown.firstChild)})})),Z.define("caret_position",(function(){var t=this;t.hook("instead","setCaret",e=>{"single"!==t.settings.mode&&t.control.contains(t.control_input)?(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach((i,n)=>{n<e?t.control_input.insertAdjacentElement("beforebegin",i):t.control.appendChild(i)}):e=t.items.length,t.caretPos=e}),t.hook("instead","moveCaret",e=>{if(!t.isFocused)return;const i=t.getLastActive(e);if(i){const n=P(i);t.setCaret(e>0?n+1:n),t.setActiveItem(),F(i,"last-active")}else t.setCaret(t.caretPos+e)})})),Z.define("dropdown_input",(function(){const t=this;t.settings.shouldOpen=!0,t.hook("before","setup",()=>{t.focus_node=t.control,I(t.control_input,"dropdown-input");const e=O('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);const i=O('<input class="items-placeholder" tabindex="-1" />');i.placeholder=t.settings.placeholder||"",t.control.append(i)}),t.on("initialize",()=>{t.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:return t.isOpen&&(q(e,!0),t.close()),void t.clearActiveItems();case 9:t.focus_node.tabIndex=-1}return t.onKeyDown.call(t,e)}),t.on("blur",()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex}),t.on("dropdown_open",()=>{t.control_input.focus()});const e=t.onBlur;t.hook("instead","onBlur",i=>{if(!i||i.relatedTarget!=t.control_input)return e.call(t)}),z(t.control_input,"blur",()=>t.onBlur()),t.hook("before","close",()=>{t.isOpen&&t.focus_node.focus()})})})),Z.define("input_autogrow",(function(){var t=this;t.on("initialize",()=>{var e=document.createElement("span"),i=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);for(const t of["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"])e.style[t]=i.style[t];var n=()=>{t.items.length>0?(e.textContent=i.value,i.style.width=e.clientWidth+"px"):i.style.width=""};n(),t.on("update item_add item_remove",n),z(i,"input",n),z(i,"keyup",n),z(i,"blur",n),z(i,"update",n)})})),Z.define("no_backspace_delete",(function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",i=>!!t.activeItems.length&&e.call(t,i))})),Z.define("no_active_items",(function(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})})),Z.define("optgroup_columns",(function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",i=>{var n,s,o,r;if(!t.isOpen||37!==i.keyCode&&39!==i.keyCode)return e.call(t,i);r=k(t.activeOption,"[data-group]"),n=P(t.activeOption,"[data-selectable]"),r&&(r=37===i.keyCode?r.previousSibling:r.nextSibling)&&(s=(o=r.querySelectorAll("[data-selectable]"))[Math.min(o.length-1,n)])&&t.setActiveOption(s)})})),Z.define("remove_button",(function(t){const e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=this;if(e.append){var n='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+N(e.title)+'">'+e.label+"</a>";i.hook("after","setupTemplates",()=>{var t=i.settings.render.item;i.settings.render.item=(e,s)=>{var o=O(t.call(i,e,s)),r=O(n);return o.appendChild(r),z(r,"mousedown",t=>{q(t,!0)}),z(r,"click",t=>{if(q(t,!0),!i.isLocked){var e=o.dataset.value;i.removeItem(e),i.refreshOptions(!1),i.inputState()}}),o}})}})),Z.define("restore_on_backspace",(function(t){const e=this,i=Object.assign({text:t=>t[e.settings.labelField]},t);e.on("item_remove",(function(t){if(e.isFocused&&""===e.control_input.value.trim()){var n=e.options[t];n&&e.setTextboxValue(i.text.call(e,n))}}))})),Z.define("virtual_scroll",(function(){const t=this,e=t.canLoad,i=t.clearActiveOption,n=t.loadCallback;var s,o,r={},l=!1;if(t.settings.shouldLoadMore||(t.settings.shouldLoadMore=function(){if(s.clientHeight/(s.scrollHeight-s.scrollTop)>.9)return!0;if(t.activeOption){var e=t.selectable();if([...e].indexOf(t.activeOption)>=e.length-2)return!0}return!1}),!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";function a(e){return!("number"==typeof t.settings.maxOptions&&s.children.length>=t.settings.maxOptions||!(e in r)||!r[e])}t.settings.sortField=[{field:"$order"},{field:"$score"}],t.setNextUrl=function(t,e){r[t]=e},t.getUrl=function(e){if(e in r){const t=r[e];return r[e]=!1,t}return r={},t.settings.firstUrl.call(t,e)},t.hook("instead","clearActiveOption",()=>{if(!l)return i.call(t)}),t.hook("instead","canLoad",i=>i in r?a(i):e.call(t,i)),t.hook("instead","loadCallback",(e,i)=>{l?o&&e.length>0&&(o.dataset.value=e[0][t.settings.valueField]):t.clearOptions(),n.call(t,e,i),l=!1}),t.hook("after","refreshOptions",()=>{const e=t.lastValue;var i;a(e)?(i=t.render("loading_more",{query:e}))&&(i.setAttribute("data-selectable",""),o=i):e in r&&!s.querySelector(".no-results")&&(i=t.render("no_more_results",{query:e})),i&&(I(i,t.settings.optionClass),s.append(i))}),t.on("initialize",()=>{s=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:function(){return'<div class="loading-more-results">Loading more results ... </div>'},no_more_results:function(){return'<div class="no-more-results">No more results</div>'}},t.settings.render),s.addEventListener("scroll",(function(){t.settings.shouldLoadMore.call(t)&&a(t.lastValue)&&(l||(l=!0,t.load.call(t,t.lastValue)))}))})})),Z}()},28:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Events/GetField")},29:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Events/GetModel")},32:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Utilities/Sanitizer")},40:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBFieldWithPriceBase")},6:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Fields/Core/FBFieldWithPriceBase.Options")},667:function(t,e,i){},95:function(t,e){t.exports=RedNaoFormBuilder.default("FormBuilder/Utilities/Managers/CurrencyManager")}});